import{_ as y}from"./SvgIcon.45949273.js";import{T as M}from"./TokenIcon.e74a429a.js";import{_ as S,r as v,o as n,b as i,c as u,W as j,a as o,t as s,j as V,k as F,m as z,l as E,n as P,P as J,u as t,d as r,e as m,g as h,w as f,v as K,T as R,B as O,K as U,f as T,F as W,J as q,h as G,H as Q,I as X}from"./index.05c002f2.js";import{u as Z}from"./redPacketStore.75f1f5c6.js";import{d as w}from"./dayjs.min.99ea2411.js";const ee={class:"avatar"},te={__name:"Avatar",props:{image:{type:String,default:""},address:{type:String,default:""}},setup(d){return(g,A)=>{const e=v("van-image");return n(),i("div",ee,[d.image?(n(),u(e,{key:0,class:"img",round:"","lazy-load":"","show-loading":"",width:"100%",height:"100%",src:d.image,"error-icon":"/assets/images/groupAvatar.png"},null,8,["src"])):(n(),i("div",{key:1,class:"avatar-text",style:j({backgroundColor:"#"+d.address.slice(-6)})},[o("div",null,s(d.address.slice(-2).toUpperCase()),1)],4))])}}},se=S(te,[["__scopeId","data-v-75952dc2"]]);const oe=d=>(Q("data-v-2bfa0842"),d=d(),X(),d),ae={class:"body"},ne={class:"top"},ce={class:"info"},ie=oe(()=>o("div",{class:"empty"},null,-1)),de={class:"background"},re={class:"coin-logo"},le={class:"coin"},ue={class:"from"},_e={class:"congratulation"},me={key:0,class:"amount"},ve={class:"center"},pe={class:"info"},ke={class:"text"},ye={class:"item-left"},he={class:"left-content"},fe={key:0,class:"mine",type:"primary"},ge={class:"time"},be={class:"item-right"},Ce={key:0,class:"best-luck"},Te={class:"bottom"},we={key:0,class:"tips"},Ae={key:0},$e={class:"id"},Ie={__name:"ShowLuck",setup(d){const g=V(),A=F(),e=Z(),x=z("global"),{t:b}=E();P([]);const $=P(0);function D(){const a="/RedPacket/"+e.uuid+"/activityDetail";g.push(a)}function Y(){const a="/RedPacket/"+e.uuid;g.push(a)}async function L(){await e.getRedPacketDetail(),await H(e.creatorAddress,e.contractChain,e.symbol,e.totalAmount)}const N=J().params.uuid;e.uuid=N,L();async function H(a,l,_,p){let k=(await K.debank.getTokenList(a,l)).data.data.find(c=>c.symbol==_);if(!k){R(b("unsupportedToken"));return}console.log(k);let C=k.current_price_usd;$.value=O(Number(p)).multipliedBy(Number(C)).toFixed(2)}function B(a,l){let _=x.cfg.allowChainList.find(p=>p.chain==a);_?window.open(_.txNetwork+l,"_blank"):R(b("unsupportedNetwork"))}return(a,l)=>{const _=v("van-icon"),p=v("van-empty"),I=v("van-cell"),k=v("van-list"),C=v("van-button");return n(),i("div",ae,[o("div",ne,[o("div",ce,[ie,o("div",de,[o("div",re,[t(e).contractChain?(n(),u(M,{key:0,tokenIcon:t(U)(t(e).contractChain.toLowerCase(),t(e).contractAddress.toLowerCase())},null,8,["tokenIcon"])):r("",!0)])]),o("div",le,s(t(e).symbol),1),o("div",ue,[t(e).type==0?(n(),u(y,{key:0,name:"pin"})):(n(),u(y,{key:1,name:"pu"})),m(" "+s(a.$t("redPacketSend",{user:t(T)(t(e).creatorAddress)})),1)]),o("div",_e,s(t(e).remark),1),t(e).singleAmount!=0?(n(),i("div",me,"+"+s(t(e).singleAmount)+" "+s(t(e).symbol),1)):r("",!0)]),t(e).title?(n(),i("div",{key:0,class:"detail",onClick:D},[m(s(a.$t("seeActivityDetail"))+" ",1),h(_,{name:"arrow"})])):r("",!0)]),o("div",ve,[o("div",pe,s(a.$t("redPacketInfo",{totalCount:t(e).count,totalAmount:t(e).totalAmount,symbol:t(e).symbol,totalPrice:$.value,leftCount:t(e).count-t(e).receivedCount})),1),t(e).receiveList.length==0?(n(),u(p,{key:0,class:"empty-box"},{image:f(()=>[h(y,{class:"icon",name:"emptyHistory"}),o("div",ke,s(a.$t("noReceiveRecord")),1)]),_:1})):(n(),u(k,{key:1},{default:f(()=>[(n(!0),i(W,null,q(t(e).receiveList,c=>(n(),u(I,{class:"item",key:c},{title:f(()=>[o("div",ye,[h(se,{class:"avatar",address:c.userAddress},null,8,["address"]),o("div",he,[o("div",null,[m(s(t(T)(c.userAddress)),1),c.userAddress==t(A).walletAddress?(n(),i("div",fe,s(a.$t("mine")),1)):r("",!0)]),o("div",ge,s(t(w).unix(c.time).format("YYYY-MM-DD HH:mm")),1)])])]),value:f(()=>[o("div",be,[o("div",null,s(c.amount)+" "+s(t(e).symbol),1),c.id==t(e).luckyReceiveId?(n(),i("div",Ce,[h(y,{name:"good-fill"}),m(s(a.$t("bestLuck")),1)])):r("",!0)])]),_:2},1024))),128))]),_:1}))]),o("div",Te,[t(e).status!=3?(n(),i("div",we,s(t(e).status==1?a.$t("receivedRedPacketText2",{date:t(w).unix(t(e).sendTime+t(e).endTime).format("YYYY-MM-DD HH:mm:ss")}):a.$t("receivedRedPacketText",{date:t(w).unix(t(e).sendTime+t(e).endTime).format("YYYY-MM-DD HH:mm:ss")})),1)):r("",!0),t(e).status==3&&!t(e).isReceived?(n(),u(C,{key:1,type:"primary",class:"open",onClick:Y},{default:f(()=>[m(s(a.$t("grabNow")),1),t(e).receivedCount>0?(n(),i("span",Ae,"("+s(a.$t("over",{count:t(e).count-t(e).receivedCount}))+")",1)):r("",!0)]),_:1})):r("",!0),t(e).unlockTx?(n(),i("div",{key:2,class:"unlock-tx",onClick:l[0]||(l[0]=c=>B(t(e).contractChain,t(e).unlockTx))},s(t(b)("txHash")+": "+t(T)(t(e).unlockTx)+" "),1)):r("",!0),o("div",$e,[m(s(a.$t("redPacketOrder"))+": "+s(t(e).id)+" ",1),h(y,{class:"copy-icon",name:"copy",onClick:l[1]||(l[1]=c=>t(G)(t(e).id))})])])])}}},Le=S(Ie,[["__scopeId","data-v-2bfa0842"]]);export{Le as default};
