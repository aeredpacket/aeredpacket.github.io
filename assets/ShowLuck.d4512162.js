import{_ as y}from"./SvgIcon.ed6a2a27.js";import{T as j}from"./TokenIcon.a0687b33.js";import{_ as S,r as v,o as n,b as i,c as u,X as M,a as o,t as s,j as V,k as F,m as z,l as E,n as I,P as J,u as t,d as r,e as m,g as h,w as f,v as K,T as P,B as O,K as U,f as w,F as X,J as q,h as G,H as Q,I as W}from"./index.85e97609.js";import{u as Z}from"./redPacketStore.b6aa6049.js";import{d as R}from"./dayjs.min.ca26a367.js";const ee={class:"avatar"},te={__name:"Avatar",props:{image:{type:String,default:""},address:{type:String,default:""}},setup(d){return(g,T)=>{const e=v("van-image");return n(),i("div",ee,[d.image?(n(),u(e,{key:0,class:"img",round:"","lazy-load":"","show-loading":"",width:"100%",height:"100%",src:d.image,"error-icon":"/assets/images/groupAvatar.png"},null,8,["src"])):(n(),i("div",{key:1,class:"avatar-text",style:M({backgroundColor:"#"+d.address.slice(-6)})},[o("div",null,s(d.address.slice(-2).toUpperCase()),1)],4))])}}},se=S(te,[["__scopeId","data-v-75952dc2"]]);const oe=d=>(Q("data-v-54cf275b"),d=d(),W(),d),ae={class:"body"},ne={class:"top"},ce={class:"info"},ie=oe(()=>o("div",{class:"empty"},null,-1)),de={class:"background"},re={class:"coin-logo"},le={class:"coin"},ue={class:"from"},_e={class:"congratulation"},me={key:0,class:"amount"},ve={class:"center"},pe={class:"info"},ke={class:"text"},ye={class:"item-left"},he={class:"left-content"},fe={key:0,class:"mine",type:"primary"},ge={class:"time"},be={class:"item-right"},Ce={key:0,class:"best-luck"},we={class:"bottom"},Te={key:0,class:"tips"},Ae={key:0},$e={class:"id"},Ie={__name:"ShowLuck",setup(d){const g=V(),T=F(),e=Z(),x=z("global"),{t:b}=E();I([]);const A=I(0);function L(){const a="/RedPacket/"+e.uuid+"/activityDetail";g.push(a)}function N(){const a="/RedPacket/"+e.uuid;g.push(a)}async function D(){await e.getRedPacketDetail(),await B(e.creatorAddress,e.contractChain,e.symbol,e.totalAmount)}const Y=J().params.uuid;e.uuid=Y,D();async function B(a,l,_,p){let k=(await K.debank.getTokenList(a,l)).data.data.find(c=>c.symbol==_);if(!k){P(b("unsupportedToken"));return}console.log(k);let C=k.current_price_usd;A.value=O(Number(p)).multipliedBy(Number(C)).toFixed(2)}function H(a,l){let _=x.cfg.allowChainList.find(p=>p.chain==a);_?window.open(_.txNetwork+l,"_blank"):P(b("unsupportedNetwork"))}return(a,l)=>{const _=v("van-icon"),p=v("van-empty"),$=v("van-cell"),k=v("van-list"),C=v("van-button");return n(),i("div",ae,[o("div",ne,[o("div",ce,[ie,o("div",de,[o("div",re,[t(e).contractChain?(n(),u(j,{key:0,tokenIcon:t(U)(t(e).contractChain.toLowerCase(),t(e).contractAddress.toLowerCase())},null,8,["tokenIcon"])):r("",!0)])]),o("div",le,s(t(e).symbol),1),o("div",ue,[t(e).type==0?(n(),u(y,{key:0,name:"pin"})):(n(),u(y,{key:1,name:"pu"})),m(" "+s(a.$t("redPacketSend",{user:t(w)(t(e).creatorAddress)})),1)]),o("div",_e,s(t(e).remark),1),t(e).singleAmount!=0?(n(),i("div",me,"+"+s(t(e).singleAmount)+" "+s(t(e).symbol),1)):r("",!0)]),t(e).title?(n(),i("div",{key:0,class:"detail",onClick:L},[m(s(a.$t("seeActivityDetail"))+" ",1),h(_,{name:"arrow"})])):r("",!0)]),o("div",ve,[o("div",pe,s(a.$t("redPacketInfo",{totalCount:t(e).count,totalAmount:t(e).totalAmount,symbol:t(e).symbol,totalPrice:A.value,leftCount:t(e).count-t(e).receivedCount})),1),t(e).receiveList.length==0?(n(),u(p,{key:0,class:"empty-box"},{image:f(()=>[h(y,{class:"icon",name:"emptyHistory"}),o("div",ke,s(a.$t("noReceiveRecord")),1)]),_:1})):(n(),u(k,{key:1},{default:f(()=>[(n(!0),i(X,null,q(t(e).receiveList,c=>(n(),u($,{class:"item",key:c},{title:f(()=>[o("div",ye,[h(se,{class:"avatar",address:c.userAddress},null,8,["address"]),o("div",he,[o("div",null,[m(s(t(w)(c.userAddress)),1),c.userAddress==t(T).walletAddress?(n(),i("div",fe,s(a.$t("mine")),1)):r("",!0)]),o("div",ge,s(t(R).unix(c.time).format("YYYY-MM-DD HH:mm")),1)])])]),value:f(()=>[o("div",be,[o("div",null,s(c.amount)+" "+s(t(e).symbol),1),c.id==t(e).luckyReceiveId?(n(),i("div",Ce,[h(y,{name:"good-fill"}),m(s(a.$t("bestLuck")),1)])):r("",!0)])]),_:2},1024))),128))]),_:1}))]),o("div",we,[t(e).status!=3?(n(),i("div",Te,s(t(e).status==1?a.$t("receivedRedPacketText2"):a.$t("receivedRedPacketText",{date:t(R).unix(t(e).sendTime+t(e).lockTime+t(e).endTime).format("YYYY-MM-DD HH:mm:ss")})),1)):r("",!0),t(e).status==3&&!t(e).isReceived?(n(),u(C,{key:1,type:"primary",class:"open",onClick:N},{default:f(()=>[m(s(a.$t("grabNow")),1),t(e).receivedCount>0?(n(),i("span",Ae,"("+s(a.$t("over",{count:t(e).count-t(e).receivedCount}))+")",1)):r("",!0)]),_:1})):r("",!0),t(e).unlockTx?(n(),i("div",{key:2,class:"unlock-tx",onClick:l[0]||(l[0]=c=>H(t(e).contractChain,t(e).unlockTx))},s(t(b)("txHash")+": "+t(w)(t(e).unlockTx)+" "),1)):r("",!0),o("div",$e,[m(s(a.$t("redPacketOrder"))+": "+s(t(e).id)+" ",1),h(y,{class:"copy-icon",name:"copy",onClick:l[1]||(l[1]=c=>t(G)(t(e).id))})])])])}}},De=S(Ie,[["__scopeId","data-v-54cf275b"]]);export{De as default};
