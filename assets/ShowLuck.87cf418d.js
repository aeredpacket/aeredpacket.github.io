import{_ as v}from"./SvgIcon.eb032c3b.js";import{T as B}from"./TokenIcon.185f4fc5.js";import{_ as $,r as _,o as a,b as i,c as l,V as H,a as o,t as s,j,k as x,m as V,l as M,n as T,O as F,u as t,d as r,e as u,g as p,w as y,v as z,T as O,B as E,J as G,f as I,F as J,I as U,h as q,G as K,H as Q}from"./index.091edbb1.js";import{u as W}from"./redPacketStore.a2335276.js";import{d as S}from"./dayjs.min.f81567ef.js";const X={class:"avatar"},Z={__name:"Avatar",props:{image:{type:String,default:""},address:{type:String,default:""}},setup(d){return(h,A)=>{const e=_("van-image");return a(),i("div",X,[d.image?(a(),l(e,{key:0,class:"img",round:"","lazy-load":"","show-loading":"",width:"100%",height:"100%",src:d.image,"error-icon":"/assets/images/groupAvatar.png"},null,8,["src"])):(a(),i("div",{key:1,class:"avatar-text",style:H({backgroundColor:"#"+d.address.slice(-6)})},[o("div",null,s(d.address.slice(-2).toUpperCase()),1)],4))])}}},ee=$(Z,[["__scopeId","data-v-b8512e0b"]]);const te=d=>(K("data-v-4b21a73e"),d=d(),Q(),d),se={class:"body"},oe={class:"top"},ae={class:"info"},ne=te(()=>o("div",{class:"empty"},null,-1)),ce={class:"background"},ie={class:"coin-logo"},de={class:"coin"},re={class:"from"},le={class:"congratulation"},ue={key:0,class:"amount"},_e={class:"center"},me={class:"info"},ve={class:"text"},pe={class:"item-left"},ye={class:"left-content"},ke={key:0,class:"mine",type:"primary"},he={class:"time"},ge={class:"item-right"},fe={key:0,class:"best-luck"},be={class:"bottom"},Ae={key:0,class:"tips"},Ce={key:0},we={class:"id"},Te={__name:"ShowLuck",setup(d){const h=j(),A=x(),e=W();V("global");const{t:P}=M();T([]);const C=T(0);function R(){const n="/RedPacket/"+e.uuid+"/activityDetail";h.push(n)}function D(){const n="/RedPacket/"+e.uuid;h.push(n)}async function L(){await e.getRedPacketDetail(),await Y(e.creatorAddress,e.contractChain,e.symbol,e.totalAmount)}const N=F().params.uuid;e.uuid=N,L();async function Y(n,k,g,f){let m=(await z.debank.getTokenList(n,k)).data.data.find(c=>c.symbol==g);if(!m){O(P("unsupportedToken"));return}console.log(m);let b=m.current_price_usd;C.value=E(Number(f)).multipliedBy(Number(b)).toFixed(2)}return(n,k)=>{const g=_("van-icon"),f=_("van-empty"),w=_("van-cell"),m=_("van-list"),b=_("van-button");return a(),i("div",se,[o("div",oe,[o("div",ae,[ne,o("div",ce,[o("div",ie,[t(e).contractChain?(a(),l(B,{key:0,tokenIcon:t(G)(t(e).contractChain.toLowerCase(),t(e).contractAddress.toLowerCase())},null,8,["tokenIcon"])):r("",!0)])]),o("div",de,s(t(e).symbol),1),o("div",re,[t(e).type==0?(a(),l(v,{key:0,name:"pin"})):(a(),l(v,{key:1,name:"pu"})),u(" "+s(n.$t("redPacketSend",{user:t(I)(t(e).creatorAddress)})),1)]),o("div",le,s(t(e).remark),1),t(e).singleAmount!=0?(a(),i("div",ue,"+"+s(t(e).singleAmount)+" "+s(t(e).symbol),1)):r("",!0)]),t(e).title?(a(),i("div",{key:0,class:"detail",onClick:R},[u(s(n.$t("seeActivityDetail"))+" ",1),p(g,{name:"arrow"})])):r("",!0)]),o("div",_e,[o("div",me,s(n.$t("redPacketInfo",{totalCount:t(e).count,totalAmount:t(e).totalAmount,symbol:t(e).symbol,totalPrice:C.value,leftCount:t(e).count-t(e).receivedCount})),1),t(e).receiveList.length==0?(a(),l(f,{key:0,class:"empty-box"},{image:y(()=>[p(v,{class:"icon",name:"emptyHistory"}),o("div",ve,s(n.$t("noReceiveRecord")),1)]),_:1})):(a(),l(m,{key:1},{default:y(()=>[(a(!0),i(J,null,U(t(e).receiveList,c=>(a(),l(w,{class:"item",key:c},{title:y(()=>[o("div",pe,[p(ee,{class:"avatar",address:c.userAddress},null,8,["address"]),o("div",ye,[o("div",null,[u(s(t(I)(c.userAddress)),1),c.userAddress==t(A).walletAddress?(a(),i("div",ke,s(n.$t("mine")),1)):r("",!0)]),o("div",he,s(t(S).unix(c.time).format("YYYY-MM-DD HH:mm")),1)])])]),value:y(()=>[o("div",ge,[o("div",null,s(c.amount)+" "+s(t(e).symbol),1),c.id==t(e).luckyReceiveId?(a(),i("div",fe,[p(v,{name:"good-fill"}),u(s(n.$t("bestLuck")),1)])):r("",!0)])]),_:2},1024))),128))]),_:1}))]),o("div",be,[t(e).status!=3?(a(),i("div",Ae,s(n.$t("receivedRedPacketText",{date:t(S).unix(t(e).sendTime+t(e).endTime).format("YYYY-MM-DD HH:mm:ss")})),1)):r("",!0),t(e).status==3&&!t(e).isReceived?(a(),l(b,{key:1,type:"primary",class:"open",onClick:D},{default:y(()=>[u(s(n.$t("grabNow")),1),t(e).receivedCount>0?(a(),i("span",Ce,"("+s(n.$t("over",{count:t(e).count-t(e).receivedCount}))+")",1)):r("",!0)]),_:1})):r("",!0),o("div",we,[u(s(n.$t("redPacketOrder"))+"\uFF1A"+s(t(e).id)+" ",1),p(v,{class:"copy-icon",name:"copy",onClick:k[0]||(k[0]=c=>t(q)(t(e).id))})])])])}}},Le=$(Te,[["__scopeId","data-v-4b21a73e"]]);export{Le as default};
