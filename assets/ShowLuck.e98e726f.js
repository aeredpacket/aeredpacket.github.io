import{_ as v}from"./SvgIcon.c48ef204.js";import{T as Y}from"./TokenIcon.6009e8e9.js";import{_ as I,r as _,o as a,b as i,c as l,V as B,a as o,t as s,j as H,k as j,m as x,l as V,n as T,u as t,d as r,e as u,g as p,w as y,v as M,T as F,B as z,J as U,f as S,F as E,I as G,h as J,G as O,H as q}from"./index.cd337f03.js";import{u as K}from"./redPacketStore.f2fd2577.js";import{d as $}from"./dayjs.min.b0e940d8.js";const Q={class:"avatar"},W={__name:"Avatar",props:{image:{type:String,default:""},address:{type:String,default:""}},setup(d){return(h,A)=>{const e=_("van-image");return a(),i("div",Q,[d.image?(a(),l(e,{key:0,class:"img",round:"","lazy-load":"","show-loading":"",width:"100%",height:"100%",src:d.image,"error-icon":"/assets/images/groupAvatar.png"},null,8,["src"])):(a(),i("div",{key:1,class:"avatar-text",style:B({backgroundColor:"#"+d.address.slice(-6)})},[o("div",null,s(d.address.slice(-2).toUpperCase()),1)],4))])}}},X=I(W,[["__scopeId","data-v-b8512e0b"]]);const Z=d=>(O("data-v-dcf7eb06"),d=d(),q(),d),ee={class:"body"},te={class:"top"},se={class:"info"},oe=Z(()=>o("div",{class:"empty"},null,-1)),ae={class:"background"},ne={class:"coin-logo"},ce={class:"coin"},ie={class:"from"},de={class:"congratulation"},re={key:0,class:"amount"},le={class:"center"},ue={class:"info"},_e={class:"text"},me={class:"item-left"},ve={class:"left-content"},pe={key:0,class:"mine",type:"primary"},ye={class:"time"},ke={class:"item-right"},he={key:0,class:"best-luck"},fe={class:"bottom"},ge={key:0,class:"tips"},be={key:0},Ae={class:"id"},Ce={__name:"ShowLuck",setup(d){const h=H(),A=j(),e=K();x("global");const{t:P}=V();T([]);const C=T(0);function R(){const n="/RedPacket/"+e.uuid+"/activityDetail";h.push(n)}function D(){const n="/RedPacket/"+e.uuid;h.push(n)}async function L(){await e.getRedPacketDetail(),await N(e.creatorAddress,e.contractChain,e.symbol,e.totalAmount)}L();async function N(n,k,f,g){let m=(await M.debank.getTokenList(n,k)).data.data.find(c=>c.symbol==f);if(!m){F(P("unsupportedToken"));return}console.log(m);let b=m.current_price_usd;C.value=z(Number(g)).multipliedBy(Number(b)).toFixed(2)}return(n,k)=>{const f=_("van-icon"),g=_("van-empty"),w=_("van-cell"),m=_("van-list"),b=_("van-button");return a(),i("div",ee,[o("div",te,[o("div",se,[oe,o("div",ae,[o("div",ne,[t(e).contractChain?(a(),l(Y,{key:0,tokenIcon:t(U)(t(e).contractChain.toLowerCase(),t(e).contractAddress.toLowerCase())},null,8,["tokenIcon"])):r("",!0)])]),o("div",ce,s(t(e).symbol),1),o("div",ie,[t(e).type==0?(a(),l(v,{key:0,name:"pin"})):(a(),l(v,{key:1,name:"pu"})),u(" "+s(n.$t("redPacketSend",{user:t(S)(t(e).creatorAddress)})),1)]),o("div",de,s(t(e).remark),1),t(e).singleAmount!=0?(a(),i("div",re,"+"+s(t(e).singleAmount)+" "+s(t(e).symbol),1)):r("",!0)]),t(e).title?(a(),i("div",{key:0,class:"detail",onClick:R},[u(s(n.$t("seeActivityDetail"))+" ",1),p(f,{name:"arrow"})])):r("",!0)]),o("div",le,[o("div",ue,s(n.$t("redPacketInfo",{totalCount:t(e).count,totalAmount:t(e).totalAmount,symbol:t(e).symbol,totalPrice:C.value,leftCount:t(e).count-t(e).receivedCount})),1),t(e).receiveList.length==0?(a(),l(g,{key:0,class:"empty-box"},{image:y(()=>[p(v,{class:"icon",name:"emptyHistory"}),o("div",_e,s(n.$t("noReceiveRecord")),1)]),_:1})):(a(),l(m,{key:1},{default:y(()=>[(a(!0),i(E,null,G(t(e).receiveList,c=>(a(),l(w,{class:"item",key:c},{title:y(()=>[o("div",me,[p(X,{class:"avatar",address:c.userAddress},null,8,["address"]),o("div",ve,[o("div",null,[u(s(t(S)(c.userAddress)),1),c.userAddress==t(A).walletAddress?(a(),i("div",pe,s(n.$t("mine")),1)):r("",!0)]),o("div",ye,s(t($).unix(c.time).format("YYYY-MM-DD HH:mm")),1)])])]),value:y(()=>[o("div",ke,[o("div",null,s(c.amount)+" "+s(t(e).symbol),1),c.userAddress==t(e).luckyUserAddress?(a(),i("div",he,[p(v,{name:"good-fill"}),u(s(n.$t("bestLuck")),1)])):r("",!0)])]),_:2},1024))),128))]),_:1}))]),o("div",fe,[t(e).status!=3?(a(),i("div",ge,s(n.$t("receivedRedPacketText",{date:t($).unix(t(e).sendTime+t(e).endTime).format("YYYY-MM-DD HH:mm:ss")})),1)):r("",!0),t(e).status==3&&!t(e).isReceived?(a(),l(b,{key:1,type:"primary",class:"open",onClick:D},{default:y(()=>[u(s(n.$t("grabNow")),1),t(e).receivedCount>0?(a(),i("span",be,"("+s(n.$t("over",{count:t(e).count-t(e).receivedCount}))+")",1)):r("",!0)]),_:1})):r("",!0),o("div",Ae,[u(s(n.$t("redPacketOrder"))+"\uFF1A"+s(t(e).id)+" ",1),p(v,{class:"copy-icon",name:"copy",onClick:k[0]||(k[0]=c=>t(J)(t(e).id))})])])])}}},Pe=I(Ce,[["__scopeId","data-v-dcf7eb06"]]);export{Pe as default};
