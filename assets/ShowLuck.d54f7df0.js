import{_ as p}from"./SvgIcon.c937bd7f.js";import{T as H}from"./TokenIcon.74cd753f.js";import{_ as R,r as m,o as n,b as d,c as u,R as j,a,t as o,j as x,k as M,m as V,n as S,u as s,d as l,e as _,g as y,w as k,s as $,B as z,H as F,f as P,F as U,G as E,h as G,C as O,D as W}from"./index.7b1279d5.js";import{u as q}from"./redPacketStore.762c11a4.js";import{d as I}from"./dayjs.min.52b6b34e.js";const J={class:"avatar"},K={__name:"Avatar",props:{image:{type:String,default:""},address:{type:String,default:""}},setup(r){return(f,w)=>{const e=m("van-image");return n(),d("div",J,[r.image?(n(),u(e,{key:0,class:"img",round:"","lazy-load":"","show-loading":"",width:"100%",height:"100%",src:r.image,"error-icon":"/assets/images/groupAvatar.png"},null,8,["src"])):(n(),d("div",{key:1,class:"avatar-text",style:j({backgroundColor:"#"+r.address.slice(-6)})},[a("div",null,o(r.address.slice(-2).toUpperCase()),1)],4))])}}},Q=R(K,[["__scopeId","data-v-75952dc2"]]);const X=r=>(O("data-v-59b19984"),r=r(),W(),r),Z={class:"body"},ee={class:"top"},te={class:"info"},se=X(()=>a("div",{class:"empty"},null,-1)),oe={class:"background"},ae={class:"coin-logo"},ne={class:"coin"},ce={class:"from"},ie={class:"congratulation"},de={key:0,class:"amount"},re={class:"center"},le={class:"info"},ue={class:"text"},_e={class:"item-left"},me={class:"left-content"},ve={key:0,class:"mine",type:"primary"},pe={class:"time"},ye={class:"item-right"},ke={key:0,class:"best-luck"},he={class:"bottom"},ge={key:0,class:"tips"},fe={key:0},be={class:"id"},Ae={__name:"ShowLuck",setup(r){const f=x(),w=M(),e=q();V("global"),S([]);const C=S(0);function D(){const c="/RedPacket/"+e.uuid+"/activityDetail";f.push(c)}function L(){const c="/RedPacket/"+e.uuid;f.push(c)}async function N(){await e.getRedPacketDetail(),await Y(e.creatorAddress,e.contractChain,e.symbol,e.totalAmount)}N();async function Y(c,v,b,A){let h=await $.wallet.getWalletTokenList(c,v);console.log(h);let g=h.data.find(B=>B.optimized_symbol==b);if(!g){Toast(t("unsupportedToken"));return}let i=(await $.wallet.getTokenInfo(v,g.id)).data.price;C.value=z(Number(A)).multipliedBy(Number(i)).toFixed(2)}return(c,v)=>{const b=m("van-icon"),A=m("van-empty"),h=m("van-cell"),g=m("van-list"),T=m("van-button");return n(),d("div",Z,[a("div",ee,[a("div",te,[se,a("div",oe,[a("div",ae,[s(e).contractChain?(n(),u(H,{key:0,tokenIcon:s(F)(s(e).contractChain.toLowerCase(),s(e).contractAddress.toLowerCase())},null,8,["tokenIcon"])):l("",!0)])]),a("div",ne,o(s(e).symbol),1),a("div",ce,[s(e).type==0?(n(),u(p,{key:0,name:"pin"})):(n(),u(p,{key:1,name:"pu"})),_(" "+o(c.$t("redPacketSend",{user:s(P)(s(e).creatorAddress)})),1)]),a("div",ie,o(s(e).remark),1),s(e).singleAmount!=0?(n(),d("div",de,"+"+o(s(e).singleAmount)+" "+o(s(e).symbol),1)):l("",!0)]),s(e).title?(n(),d("div",{key:0,class:"detail",onClick:D},[_(o(c.$t("seeActivityDetail"))+" ",1),y(b,{name:"arrow"})])):l("",!0)]),a("div",re,[a("div",le,o(c.$t("redPacketInfo",{totalCount:s(e).count,totalAmount:s(e).totalAmount,symbol:s(e).symbol,totalPrice:C.value,leftCount:s(e).count-s(e).receivedCount})),1),s(e).receiveList.length==0?(n(),u(A,{key:0,class:"empty-box"},{image:k(()=>[y(p,{class:"icon",name:"emptyHistory"}),a("div",ue,o(c.$t("noReceiveRecord")),1)]),_:1})):(n(),u(g,{key:1},{default:k(()=>[(n(!0),d(U,null,E(s(e).receiveList,i=>(n(),u(h,{class:"item",key:i},{title:k(()=>[a("div",_e,[y(Q,{class:"avatar",address:i.userAddress},null,8,["address"]),a("div",me,[a("div",null,[_(o(s(P)(i.userAddress)),1),i.userAddress==s(w).walletAddress?(n(),d("div",ve,o(c.$t("mine")),1)):l("",!0)]),a("div",pe,o(s(I).unix(i.time).format("YYYY-MM-DD HH:mm")),1)])])]),value:k(()=>[a("div",ye,[a("div",null,o(i.amount)+" "+o(s(e).symbol),1),i.userAddress==s(e).luckyUserAddress?(n(),d("div",ke,[y(p,{name:"good-fill"}),_(o(c.$t("bestLuck")),1)])):l("",!0)])]),_:2},1024))),128))]),_:1}))]),a("div",he,[s(e).status!=3?(n(),d("div",ge,o(c.$t("receivedRedPacketText",{date:s(I).unix(s(e).sendTime+s(e).endTime).format("YYYY-MM-DD HH:mm:ss")})),1)):l("",!0),s(e).status==3&&!s(e).isReceived?(n(),u(T,{key:1,type:"primary",class:"open",onClick:L},{default:k(()=>[_(o(c.$t("grabNow")),1),s(e).receivedCount>0?(n(),d("span",fe,"("+o(c.$t("over",{count:s(e).count-s(e).receivedCount}))+")",1)):l("",!0)]),_:1})):l("",!0),a("div",be,[_(o(c.$t("redPacketOrder"))+"\uFF1A"+o(s(e).id)+" ",1),y(p,{class:"copy-icon",name:"copy",onClick:v[0]||(v[0]=i=>s(G)(s(e).id))})])])])}}},Pe=R(Ae,[["__scopeId","data-v-59b19984"]]);export{Pe as default};
