import{T as M}from"./TokenIcon.0bf841c1.js";import{m as R,j,k as q,l as O,n as m,p as b,q as U,r as p,o as r,b as f,g as w,a as o,t as d,F as L,E as T,u as a,w as g,K as W,c as I,x as z,f as D,B as K,d as P,T as G,s as C}from"./index.cdc89ba4.js";import{_ as H}from"./plugin-vueexport-helper.2444895f.js";const J={class:"content"},Q={class:"p-16"},X={class:"network"},Y={class:"network-list"},Z=["onClick"],ee={class:"item-left"},te={class:"left-content"},se={class:"token-name"},oe={class:"token-address"},ne={class:"item-right"},ae={class:"item-right-left"},le={class:"qty"},ce={class:"amount"},ie={class:"item-right-right"},re={__name:"SelectToken",setup(de){const A=R("global"),$=j(),l=q();O();const x=m([]),k=m([]),c=m(""),B=b(()=>c.value?c.value.startsWith("0x")?k.value.filter(e=>e.address==c):k.value.filter(e=>e.symbol.indexOf(c.value.toLowerCase())>-1):k.value),h={text:"BSC",value:"bsc",isAllow:!0},u=m({text:h.text,value:h.value,isAllow:h.isAllow}),S=b(()=>{let e=[h];for(let n of x.value){let i=A.cfg.allowChainList.some(v=>v.chain==n.chain),_={text:n.chain.toUpperCase(),value:n.chain,isAllow:i};e.push(_)}return e});async function N(e){!e.isAllow||u.value.value!=e.value&&(u.value=e,y())}async function y(){let e=[];const n=G.loading({message:"Loading...",forbidClick:!0,duration:0});u.value.value=="all"?e=await C.debank.getAllTokenList(l.walletAddress):e=await C.debank.getTokenList(l.walletAddress,u.value.value);let i=e.data.filter(t=>new RegExp("^0x.*$","gi").test(t.id)).map(t=>({address:t.id.toLowerCase(),tokenId:`${t.id}-${t.chain}`.toLowerCase(),chain:t.chain.toLowerCase(),symbol:t.symbol,decimals:t.decimals,icon:t.logo_url,amount:t.amount,price:t.price})),_=i.map(t=>t.tokenId),v=await C.redPacket.tokenlistcheck(_);n.clear(),k.value=i.filter(t=>v.data[t.tokenId].riskScore<60)}function V(e){l.token=e,$.push("/")}async function F(){l.isConnectWallet&&await y()}return U(()=>{console.log("onMounted"),F()}),(e,n)=>{const i=p("van-search"),_=p("van-icon"),v=p("van-cell"),t=p("van-list");return r(),f("div",null,[w(i,{modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=s=>c.value=s),shape:"round","show-action":"",placeholder:e.$t("searchTokenContractOrName"),"action-text":e.$t("cancel")},null,8,["modelValue","placeholder","action-text"]),o("div",J,[o("div",Q,d(e.$t("myAssets")),1),o("div",X,[o("ul",Y,[(r(!0),f(L,null,T(a(S),s=>(r(),f("li",{class:W(u.value.value==s.value?"network-selected":""),onClick:E=>N(s)},d(s.text),11,Z))),256))])]),o("div",null,[w(t,{"finished-text":e.$t("noMore"),class:"token-list"},{default:g(()=>[(r(!0),f(L,null,T(a(B),s=>(r(),I(v,{class:"item",key:s,onClick:E=>V(s)},{title:g(()=>[o("div",ee,[w(M,{class:"token-icon",tokenIcon:s.icon,chainIcon:a(z)(s.chain)},null,8,["tokenIcon","chainIcon"]),o("div",te,[o("div",se,d(s.symbol),1),o("div",oe,d(a(D)(s.address)),1)])])]),value:g(()=>[o("div",ne,[o("div",ae,[o("div",le,d(s.amount),1),o("div",ce,"$"+d(a(K)(s.amount).multipliedBy(s.price).toFixed(2)),1)]),o("div",ie,[a(l).token&&a(l).token.symbol==s.symbol?(r(),I(_,{key:0,name:"success",color:"#3F80F7"})):P("",!0)])])]),_:2},1032,["onClick"]))),128))]),_:1},8,["finished-text"])])])])}}},ke=H(re,[["__scopeId","data-v-aec74631"]]);export{ke as default};
